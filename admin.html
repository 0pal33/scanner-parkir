<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Dashboard</title>

<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>

<style>
body{font-family:Arial;background:#eee;text-align:center;padding:20px;}
table{width:100%;background:white;border-radius:12px;}
td,th{padding:15px;}
button{padding:15px;margin:10px;width:90%;}
</style>
</head>

<body>

<h2>Dashboard</h2>

<table border="1">
<tr><th></th><th>Checkout</th><th>Total</th></tr>
<tr><td>Hari Ini</td><td id="d1">0</td><td id="t1">0</td></tr>
<tr><td>Minggu Ini</td><td id="d2">0</td><td id="t2">0</td></tr>
<tr><td>Bulan Ini</td><td id="d3">0</td><td id="t3">0</td></tr>
</table>

<button onclick="logout()" style="background:red;color:white;">Logout</button>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyCbB2eqYAxCM1DvkSyCyoqKwq39mvCBwCQ",
  authDomain: "parkir-demo.firebaseapp.com",
  projectId: "parkir-demo",
  storageBucket: "parkir-demo.firebasestorage.app",
  messagingSenderId: "962001897575",
  appId: "1:962001897575:web:811c1902e3a274f7bb6cc2"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

db.collection("checkout").get().then(snapshot=>{
let today=0,week=0,month=0;
snapshot.forEach(doc=>{
let data=doc.data();
let time=data.checkoutAt.toDate();
let now=new Date();

if(time.toDateString()==now.toDateString()){
today++; document.getElementById("t1").innerText+=data.bayar;
}
});
document.getElementById("d1").innerText=today;
});
</script>

</body>
</html>
