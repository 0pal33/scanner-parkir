<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Wayahe Parkir</title>

<link rel="manifest" href="manifest.json">

<script src="https://unpkg.com/html5-qrcode"></script>

<style>
body {
 text-align:center;
 font-family: Arial;
 background:#f5f5f5;
 margin:0;
 padding:20px;
}

#reader {
 width:260px;
 margin:auto;
 border-radius:20px;
 overflow:hidden;
}

button {
 width:90%;
 padding:16px;
 margin:10px;
 border:none;
 border-radius:14px;
 font-size:18px;
}

.start { background:black; color:white; }
.stop { background:red; color:white; }
.manual { background:#2d77c7; color:white; }
.admin { background:#555; color:white; }
</style>
</head>

<body>

<div id="reader"></div>

<button id="startBtn" class="start" onclick="startScan()">START SCANNING</button>
<button id="stopBtn" class="stop" onclick="stopScan()" style="display:none;">STOP SCANNING</button>

<button class="manual" onclick="manualInput()">Ketik Manual</button>
<button class="admin" onclick="location.href='admin.html'">Login Admin</button>

<script>

let html5QrCode;
let scanning = false;
let cameraId;

async function startScan(){

 const devices = await Html5Qrcode.getCameras();
 cameraId = devices.find(d => d.label.toLowerCase().includes("back"))?.id || devices[0].id;

 html5QrCode = new Html5Qrcode("reader");

 html5QrCode.start(
   cameraId,
   { fps:10, qrbox:200 },
   qr => {
     alert("QR: "+qr);
   }
 );

 scanning = true;

 document.getElementById("startBtn").style.display="none";
 document.getElementById("stopBtn").style.display="block";
}

function stopScan(){
 if(html5QrCode){
   html5QrCode.stop();
 }
 scanning=false;

 document.getElementById("startBtn").style.display="block";
 document.getElementById("stopBtn").style.display="none";
}

function manualInput(){
 let num = prompt("Masukkan angka parkir:");
 if(num){
   alert("Parkir-"+num);
 }
}

</script>

</body>
</html>
